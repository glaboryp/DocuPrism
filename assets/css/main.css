@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    @apply scroll-smooth;
  }
  
  body {
    @apply bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 antialiased;
  }
  
  /* Prevent theme transition flash on page load */
  body {
    transition: background-color 300ms ease, color 300ms ease;
  }
  
  /* Ensure no transition during initial load */
  .no-transitions * {
    transition: none !important;
  }
}

@layer components {
  .btn-primary {
    @apply bg-primary hover:bg-primary-hover disabled:bg-primary-300 disabled:cursor-not-allowed text-white font-medium py-2 px-3 sm:px-4 rounded-lg transition-colors duration-200 shadow-md hover:shadow-lg;
  }
  
  .btn-secondary {
    @apply bg-accent-50 hover:bg-accent-100 disabled:bg-gray-100 disabled:cursor-not-allowed text-accent font-medium py-2 px-3 sm:px-4 rounded-lg transition-colors duration-200 border border-accent-200 shadow-sm hover:shadow-md;
  }
  
  .card {
    @apply bg-white/80 dark:bg-gray-800/50 backdrop-blur-sm rounded-xl shadow-xl border border-gray-200 dark:border-gray-700 transition-colors duration-300;
  }
  
  .input-field {
    @apply w-full px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:border-primary-400 transition-all duration-200 shadow-sm focus:shadow-md;
  }
  
  .textarea-field {
    @apply w-full px-3 sm:px-4 py-2 sm:py-3 text-sm sm:text-base bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-primary-300 focus:border-primary-300 transition-all duration-200 resize-none shadow-sm focus:shadow-md outline-none;
    min-height: 150px;
  }
  
  @media (min-width: 640px) {
    .textarea-field {
      min-height: 200px;
    }
  }
  
  /* Large textarea variant for bigger screens */
  @media (min-width: 640px) and (min-height: 800px) {
    .textarea-field {
      min-height: 300px;
    }
  }
  
  @media (min-width: 640px) and (min-height: 1080px) {
    .textarea-field {
      min-height: 400px;
    }
  }
  
  .select-field {
    @apply w-full px-3 sm:px-4 py-2 pr-8 sm:pr-10 text-sm sm:text-base bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-primary-300 focus:border-primary-300 transition-all duration-200 shadow-sm focus:shadow-md outline-none appearance-none cursor-pointer;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
    background-position: right 0.5rem center;
    background-repeat: no-repeat;
    background-size: 1.5em 1.5em;
  }
  
  .dark .select-field {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%9ca3af' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
  }
  
  /* Badge components using custom colors */
  .badge-success {
    @apply bg-green-100 dark:bg-green-900/30 border border-green-300 dark:border-green-700 text-green-700 dark:text-green-400 px-3 py-1 rounded-full text-sm font-medium;
  }
  
  .badge-warning {
    @apply bg-yellow-100 dark:bg-yellow-900/30 border border-yellow-300 dark:border-yellow-700 text-yellow-700 dark:text-yellow-400 px-3 py-1 rounded-full text-sm font-medium;
  }
  
  .badge-error {
    @apply bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 text-red-700 dark:text-red-400 px-3 py-1 rounded-full text-sm font-medium;
  }
  
  /* Enhanced status badges */
  .status-badge {
    @apply flex items-center space-x-1 sm:space-x-2 px-2 sm:px-3 py-1 rounded-full text-xs sm:text-sm font-medium transition-all duration-200;
  }
  
  /* Clickable status badge button */
  button.status-badge {
    @apply hover:shadow-md active:scale-95 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-white dark:focus:ring-offset-gray-900;
  }
  
  button.status-badge.error {
    @apply focus:ring-red-500;
  }
  
  .status-badge.success {
    @apply bg-green-100 dark:bg-green-900/30 border border-green-300 dark:border-green-700 text-green-700 dark:text-green-400;
  }
  
  .status-badge.warning {
    @apply bg-yellow-100 dark:bg-yellow-900/30 border border-yellow-300 dark:border-yellow-700 text-yellow-700 dark:text-yellow-400;
  }
  
  .status-badge.error {
    @apply bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 text-red-700 dark:text-red-400;
  }
  
  /* Loading spinner using primary color */
  .spinner {
    @apply w-4 h-4 border-2 border-primary/30 border-t-primary rounded-full animate-spin;
  }
  
  /* Fade transition for overlay */
  .fade-enter-active,
  .fade-leave-active {
    transition: opacity 0.3s ease;
  }
  
  .fade-enter-from,
  .fade-leave-to {
    opacity: 0;
  }
}

@layer utilities {
  /* Screen reader only - hides content visually but keeps it accessible */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }
  
  /* Focus visible for keyboard navigation */
  .focus-visible:focus {
    @apply outline-none ring-2 ring-primary ring-offset-2 ring-offset-white dark:ring-offset-gray-900;
  }
  
  /* Skip to main content link */
  .skip-link {
    @apply sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50 focus:px-4 focus:py-2 focus:bg-primary focus:text-white focus:rounded-lg focus:shadow-lg;
  }
}